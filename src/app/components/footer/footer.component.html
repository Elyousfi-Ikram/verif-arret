<footer class="footer" itemscope itemtype="https://schema.org/Organization">
  <!-- Balises META SEO sp√©cifiques au footer -->
  <meta name="footer-keywords"
    content="enqu√™teur priv√© France, d√©tective agr√©√© CNAPS, investigation arr√™t maladie, surveillance professionnelle, v√©rification absent√©isme, cabinet enqu√™te priv√©e, implantations nationales, contact enqu√™teur, agr√©ment officiel">

  <!-- Image de la carte optimis√©e -->
  <div [class]="'footer-background ' + (!isContentVisible() ? 'map-visible' : 'map-hidden')">
    <!-- Container responsive pour mobile/tablet -->
    <div class="map-section-container">
      <!-- Carte en haut pour mobile/tablet -->
      <div class="carte-container">
        <!-- footer.component.html ‚Äî lazy-load image carte -->
        <img src="assets/footer/carte.png"
             alt="Carte de France des implantations VERIF-ARR√äT - Enqu√™teur priv√© agr√©√© CNAPS - Couverture nationale investigation arr√™ts maladie"
             class="carte-france"
             title="R√©seau national d'enqu√™teurs priv√©s VERIF-ARR√äT - Interventions sur tout le territoire fran√ßais"
             loading="lazy" decoding="async" />
        <!-- Points sur la carte optimis√©s -->
        <div *ngFor="let location of locations; trackBy: trackByLocationId" class="map-point"
          [class.headquarters-point]="location.isHeadquarters"
          [class.selected-point]="selectedLocation()?.id === location.id" [style.left.%]="location.mapPosition.x"
          [style.top.%]="location.mapPosition.y"
          [title]="'Bureau enqu√™teur priv√© ' + location.city + ' - Investigation arr√™t maladie - Contact local VERIF-ARR√äT'"
          [attr.aria-label]="'Implantation enqu√™teur priv√© agr√©√© √† ' + location.city"
          (click)="handlePointClick(location)">
          <span class="point-tooltip">{{ location.city }} - Enqu√™teur Priv√©</span>
        </div>
      </div>

      <!-- Liste des implantations avec design am√©lior√© -->
      <div class="address-cards-container">
        <div class="cards-header">
          <h4 class="cards-title" itemprop="name">
            <span class="title-icon">üìç</span>
            {{ 'footer.locations.title' | translate }}
            <div class="title-underline"></div>
          </h4>
        </div>

        <div class="address-cards-grid" itemscope itemtype="https://schema.org/ItemList">
          <div *ngFor="let address of locations; let i = index" [id]="'location-' + address.id" class="address-card"
            [class.highlighted]="address.isHeadquarters" [class.selected]="selectedCard() === i"
            [class.highlighted-card]="selectedLocation()?.id === address.id"
            [class.point-selected]="selectedLocation()?.id === address.id" (click)="selectCard(i)"
            [attr.aria-label]="'Bureau enqu√™teur priv√© agr√©√© CNAPS de ' + address.city + ' - Investigation arr√™t maladie'"
            itemscope itemtype="https://schema.org/LocalBusiness">

            <div class="card-header">
              <div class="city-info">
                <div class="d-flex justify-content-between align-items-center mt-3">
                  <h5 class="city-name" itemprop="name">{{ address.city }}</h5>
                  <span><i class="fas fa-chevron-down pe-5" aria-hidden="true"></i></span>
                </div>
                <span class="region-badge" *ngIf="address.isHeadquarters" itemprop="description">
                  Si√®ge Social
                </span>
              </div>
            </div>

            <div class="card-content" [class.expanded]="selectedCard() === i">
              <div class="address-info" itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
                <span class="address-icon">üìç</span>
                <p class="address-text" itemprop="streetAddress">{{ address.address }}</p>
                <meta itemprop="addressLocality" [content]="address.city">
                <meta itemprop="addressCountry" content="France">
              </div>

              <div class="contact-info">
                <a [href]="getPhoneHref(address.phone)" class="phone-link" (click)="$event.stopPropagation()"
                  itemprop="telephone"
                  [title]="'Contacter enqu√™teur priv√© ' + address.city + ' - VERIF-ARR√äT investigation arr√™t maladie'"
                  [attr.aria-label]="'T√©l√©phoner au bureau enqu√™teur priv√© de ' + address.city">
                  <span class="phone-icon">üìû</span>
                  <span class="phone-text">{{ address.displayPhone }}</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bouton emplacement optimis√© -->
  <div class="toggle-section">
    <button [class]="'btn-emplacement ' + (!isContentVisible() ? 'rotated' : '')" (click)="toggleFooterContent()"
      [attr.aria-label]="isContentVisible() ? 'Afficher la carte des implantations enqu√™teur priv√©' : 'Afficher les informations de contact VERIF-ARR√äT'"
      title="Basculer entre carte et informations - R√©seau national enqu√™teurs priv√©s VERIF-ARR√äT">
      <img src="assets/footer/emplacement.png" alt="Ic√¥ne emplacement - R√©seau national enqu√™teurs priv√©s VERIF-ARR√äT"
        class="emplacement" />
      <span class="toggle-hint">
        <span class="chevron-icon">‚ñº</span>
      </span>
    </button>
  </div>

  <!-- Contenu du footer enrichi -->
  <div [class]="'container ' + (isContentVisible() ? 'content-visible' : 'content-hidden')">
    <div *ngIf="isContentVisible()">
      <div class="footer-content">
        <!-- Section Logo et Description optimis√©e -->
        <div class="footer-section footer-about" itemscope itemtype="https://schema.org/ProfessionalService">
          <div class="footer-header">
            <div class="footer-logo">
              <img src="assets/footer/logo.png"
                alt="VERIF-ARR√äT Logo - Enqu√™teur priv√© agr√©√© CNAPS sp√©cialis√© v√©rification arr√™ts maladie" class="logo"
                itemprop="logo" title="VERIF-ARR√äT - Cabinet d'enqu√™teur priv√© professionnel agr√©√©" />
              <div class="logo-text">
                <h3 itemprop="name">VERIF-ARR√äT</h3>
                <span class="tagline" itemprop="slogan">
                  {{ 'footer.tagline' | translate }}
                </span>
              </div>
            </div>

            <!-- Section Avis optimis√©e pour mobile -->
            <div class="footer-reviews-section" itemscope itemtype="https://schema.org/AggregateRating">
              <div class="reviews-header">
                <div class="d-flex justify-content-between align-items-center gap-3">
                  <h4>{{ 'footer.reviews.title' | translate }}</h4>

                  <button class="btn-view-all-reviews" (click)="openReviewsModal()"
                    title="Consulter tous les avis clients VERIF-ARR√äT - Enqu√™teur priv√©"
                    aria-label="Voir tous les t√©moignages clients investigation arr√™t maladie">
                    {{ 'footer.reviews.button' | translate }}
                  </button>
                </div>
                <div class="p-4 text-center reviews-summary">
                  <div class="d-flex flex-row justify-content-between align-items-center gap-4">
                    <div class="d-flex flex-row align-items-center gap-2">
                      <div class="ig-rating-number" itemprop="ratingValue">{{ getFormattedRating() }}/5</div>
                      <meta itemprop="bestRating" content="5">
                      <meta itemprop="worstRating" content="1">
                    </div>
                    <div class="ig-stars-container">
                      <div class="d-flex gap-1">
                        <span *ngFor="let star of [0,1,2,3,4]; let i = index"
                          class="ig-star ig-star-enhanced ig-star-white" [ngStyle]="getStarStyle(i, averageRating)"
                          [attr.aria-label]="'√âtoile ' + (i+1) + ' - Note enqu√™teur priv√© VERIF-ARR√äT'">‚òÖ</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Description principale enrichie -->
      <div class="footer-description-section">
        <p class="footer-description text-center" itemprop="description">
          <em>
            {{ 'footer.description' | translate }}
          </em>
        </p>

      </div>

      <!-- Section Contact enrichie -->
      <div class="footer-section footer-contact" itemscope itemtype="https://schema.org/ContactPoint">
        <h4><span class="icon-contact"></span>{{ 'footer.contact.title' | translate }} VERIF-ARR√äT</h4>
        <div class="contact-info">
          <div class="contact-item">
            <a href="tel:+33607257427" class="contact-link" itemprop="telephone"
              title="Appeler VERIF-ARR√äT - Enqu√™teur priv√© agr√©√© CNAPS - Investigation arr√™t maladie"
              aria-label="T√©l√©phoner √† VERIF-ARR√äT pour une enqu√™te priv√©e">
              <span class="contact-icon">üìû</span>
              <span class="contact-text">06 07 25 74 27</span>
            </a>
          </div>
          <div class="contact-item">
            <span class="contact-link">
              <span class="contact-icon">‚úâÔ∏è</span>
              <span class="contact-text" itemprop="email">verifarret@gmail.com</span>
            </span>
          </div>
          <div class="contact-item" itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
            <span class="contact-link">
              <span class="contact-icon">üìç</span>
              <span class="contact-text">
                <span itemprop="streetAddress">37 Rue Saint Symphorien</span>,
                <span itemprop="postalCode">79000 </span>
                <span itemprop="addressLocality">Niort</span>
              </span>
            </span>
            <meta itemprop="addressCountry" content="France">
          </div>
          <div class="contact-item">
            <span class="contact-link">
              <span class="contact-icon">üïí</span>
              <span class="contact-text" itemprop="hoursAvailable">{{ 'footer.contact.hours' | translate }}</span>
            </span>
          </div>
        </div>
        <meta itemprop="contactType" content="customer service">
        <meta itemprop="areaServed" content="France">
      </div>
    </div>
  </div>

  <!-- Footer bottom enrichi -->
  <div *ngIf="isContentVisible()">
    <div class="footer-bottom">
      <div class="footer-copyright">
        <div class="copyright-content">
          <p>&copy; {{ currentYear }} VERIF-ARR√äT. {{ 'footer.copyright' | translate }}</p>
          <p class="footer-subtitle">
            {{ 'footer.subtitle' | translate }}
          </p>
        </div>
        <div class="footer-section footer-legal">
          <div class="footer-legal">
            <button type="button" class="legal-btn" (click)="onLegalClick('mentions')"
              title="Mentions L√©gales VERIF-ARR√äT - Enqu√™teur priv√© agr√©√© CNAPS investigation arr√™t maladie"
              aria-label="Mentions L√©gales cabinet enqu√™teur priv√© VERIF-ARR√äT">
              {{ 'footer.legal.mentions' | translate }}
            </button>
            <span class="separator" aria-hidden="true">|</span>
            <button type="button" class="legal-btn" (click)="onLegalClick('confidentialite')"
              title="Politique de Confidentialit√© VERIF-ARR√äT - Protection donn√©es enqu√™te priv√©e"
              aria-label="Politique de Confidentialit√© enqu√™teur priv√© professionnel">
              {{ 'footer.legal.privacy' | translate }}
            </button>
            <span class="separator" aria-hidden="true">|</span>
            <button type="button" class="legal-btn" (click)="onLegalClick('cookies')"
              title="Politique de Cookies VERIF-ARR√äT - Site enqu√™teur priv√© agr√©√©"
              aria-label="Politique de Cookies cabinet investigation priv√©e">
              {{ 'footer.legal.cookies' | translate }}
            </button>
          </div>
        </div>
      </div>
      <div class="footer-certifications" itemscope itemtype="https://schema.org/Organization">
        <span class="certification-badge" itemscope itemtype="https://schema.org/Certification">
          <span class="badge-icon" itemprop="name"> {{ 'footer.certification.cnaps.france' | translate }}</span>
          <span class="badge-number" itemprop="identifier">NUM : AGD ‚Äì 013 ‚Äì 2112 ‚Äì 10 ‚Äì 10 ‚Äì 20130336981</span>
        </span>
        <span class="certification-badge" itemscope itemtype="https://schema.org/Certification">
          <span class="badge-icon" itemprop="name">{{ 'footer.certification.cnaps.corsica' | translate }}</span>
          <span class="badge-number" itemprop="identifier">NUM : AUT ‚Äì 02A ‚Äì 2112 ‚Äì 12 ‚Äì 01 ‚Äì 20130349120</span>
        </span>
      </div>
    </div>
  </div>

  <!-- Donn√©es structur√©es enrichies -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ProfessionalService",
    "name": "VERIF-ARR√äT",
    "description": "Cabinet d'enqu√™teur priv√© agr√©√© CNAPS sp√©cialis√© dans la v√©rification d'arr√™ts maladie, investigation l√©gale contre l'absent√©isme abusif et surveillance professionnelle discr√®te",
    "serviceType": ["Enqu√™te priv√©e", "Investigation arr√™t maladie", "Surveillance professionnelle", "V√©rification absent√©isme", "D√©tective priv√©", "Rapport juridique"],
    "hasCredential": [
      {
        "@type": "EducationalOccupationalCredential",
        "name": "Agr√©ment CNAPS France",
        "identifier": "AGD ‚Äì 013 ‚Äì 2112 ‚Äì 10 ‚Äì 10 ‚Äì 20130336981"
      },
      {
        "@type": "EducationalOccupationalCredential",
        "name": "Agr√©ment CNAPS Corse",
        "identifier": "AUT ‚Äì 02A ‚Äì 2112 ‚Äì 12 ‚Äì 01 ‚Äì 20130349120"
      }
    ],
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "37 Rue Saint Symphorien",
      "addressLocality": "Niort",
      "postalCode": "79000",
      "addressCountry": "France"
    },
    "contactPoint": {
      "@type": "ContactPoint",
      "telephone": "+33607257427",
      "email": "verifarret@gmail.com",
      "contactType": "customer service",
      "areaServed": "France",
      "hoursAvailable": "Mo-Sa 09:00-21:00"
    },
    "areaServed": "France",
    "slogan": "Expertise Investigation & Discr√©tion Professionnelle",
    "keywords": "enqu√™teur priv√©, investigation arr√™t maladie, surveillance professionnelle, agr√©ment CNAPS, d√©tective priv√©, v√©rification absent√©isme, enqu√™te l√©gale, rapport juridique"
  }
  </script>
</footer>

<app-modal></app-modal>