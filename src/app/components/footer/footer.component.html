<footer class="footer" itemscope itemtype="https://schema.org/Organization">
  <!-- Balises META SEO spécifiques au footer -->
  <meta name="footer-keywords"
    content="enquêteur privé France, détective agréé CNAPS, investigation arrêt maladie, surveillance professionnelle, vérification absentéisme, cabinet enquête privée, implantations nationales, contact enquêteur, agrément officiel">

  <!-- Image de la carte optimisée -->
  <div [class]="'footer-background ' + (!isContentVisible() ? 'map-visible' : 'map-hidden')">
    <!-- Container responsive pour mobile/tablet -->
    <div class="map-section-container">
      <!-- Carte en haut pour mobile/tablet -->
      <div class="carte-container">
        <!-- footer.component.html — lazy-load image carte -->
        <img src="assets/footer/carte.png"
             alt="Carte de France des implantations VERIF-ARRÊT - Enquêteur privé agréé CNAPS - Couverture nationale investigation arrêts maladie"
             class="carte-france"
             title="Réseau national d'enquêteurs privés VERIF-ARRÊT - Interventions sur tout le territoire français"
             loading="lazy" decoding="async" />
        <!-- Points sur la carte optimisés -->
        <div *ngFor="let location of locations; trackBy: trackByLocationId" class="map-point"
          [class.headquarters-point]="location.isHeadquarters"
          [class.selected-point]="selectedLocation()?.id === location.id" [style.left.%]="location.mapPosition.x"
          [style.top.%]="location.mapPosition.y"
          [title]="'Bureau enquêteur privé ' + location.city + ' - Investigation arrêt maladie - Contact local VERIF-ARRÊT'"
          [attr.aria-label]="'Implantation enquêteur privé agréé à ' + location.city"
          (click)="handlePointClick(location)">
          <span class="point-tooltip">{{ location.city }} - Enquêteur Privé</span>
        </div>
      </div>

      <!-- Liste des implantations avec design amélioré -->
      <div class="address-cards-container">
        <div class="cards-header">
          <h4 class="cards-title" itemprop="name">
            <span class="title-icon">📍</span>
            {{ 'footer.locations.title' | translate }}
            <div class="title-underline"></div>
          </h4>
        </div>

        <div class="address-cards-grid" itemscope itemtype="https://schema.org/ItemList">
          <div *ngFor="let address of locations; let i = index" [id]="'location-' + address.id" class="address-card"
            [class.highlighted]="address.isHeadquarters" [class.selected]="selectedCard() === i"
            [class.highlighted-card]="selectedLocation()?.id === address.id"
            [class.point-selected]="selectedLocation()?.id === address.id" (click)="selectCard(i)"
            [attr.aria-label]="'Bureau enquêteur privé agréé CNAPS de ' + address.city + ' - Investigation arrêt maladie'"
            itemscope itemtype="https://schema.org/LocalBusiness">

            <div class="card-header">
              <div class="city-info">
                <div class="d-flex justify-content-between align-items-center mt-3">
                  <h5 class="city-name" itemprop="name">{{ address.city }}</h5>
                  <span><i class="fas fa-chevron-down pe-5" aria-hidden="true"></i></span>
                </div>
                <span class="region-badge" *ngIf="address.isHeadquarters" itemprop="description">
                  Siège Social
                </span>
              </div>
            </div>

            <div class="card-content" [class.expanded]="selectedCard() === i">
              <div class="address-info" itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
                <span class="address-icon">📍</span>
                <p class="address-text" itemprop="streetAddress">{{ address.address }}</p>
                <meta itemprop="addressLocality" [content]="address.city">
                <meta itemprop="addressCountry" content="France">
              </div>

              <div class="contact-info">
                <a [href]="getPhoneHref(address.phone)" class="phone-link" (click)="$event.stopPropagation()"
                  itemprop="telephone"
                  [title]="'Contacter enquêteur privé ' + address.city + ' - VERIF-ARRÊT investigation arrêt maladie'"
                  [attr.aria-label]="'Téléphoner au bureau enquêteur privé de ' + address.city">
                  <span class="phone-icon">📞</span>
                  <span class="phone-text">{{ address.displayPhone }}</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bouton emplacement optimisé -->
  <div class="toggle-section">
    <button [class]="'btn-emplacement ' + (!isContentVisible() ? 'rotated' : '')" (click)="toggleFooterContent()"
      [attr.aria-label]="isContentVisible() ? 'Afficher la carte des implantations enquêteur privé' : 'Afficher les informations de contact VERIF-ARRÊT'"
      title="Basculer entre carte et informations - Réseau national enquêteurs privés VERIF-ARRÊT">
      <img src="assets/footer/emplacement.png" alt="Icône emplacement - Réseau national enquêteurs privés VERIF-ARRÊT"
        class="emplacement" />
      <span class="toggle-hint">
        <span class="chevron-icon">▼</span>
      </span>
    </button>
  </div>

  <!-- Contenu du footer enrichi -->
  <div [class]="'container ' + (isContentVisible() ? 'content-visible' : 'content-hidden')">
    <div *ngIf="isContentVisible()">
      <div class="footer-content">
        <!-- Section Logo et Description optimisée -->
        <div class="footer-section footer-about" itemscope itemtype="https://schema.org/ProfessionalService">
          <div class="footer-header">
            <div class="footer-logo">
              <img src="assets/footer/logo.png"
                alt="VERIF-ARRÊT Logo - Enquêteur privé agréé CNAPS spécialisé vérification arrêts maladie" class="logo"
                itemprop="logo" title="VERIF-ARRÊT - Cabinet d'enquêteur privé professionnel agréé" />
              <div class="logo-text">
                <h3 itemprop="name">VERIF-ARRÊT</h3>
                <span class="tagline" itemprop="slogan">
                  {{ 'footer.tagline' | translate }}
                </span>
              </div>
            </div>

            <!-- Section Avis optimisée pour mobile -->
            <div class="footer-reviews-section" itemscope itemtype="https://schema.org/AggregateRating">
              <div class="reviews-header">
                <div class="d-flex justify-content-between align-items-center gap-3">
                  <h4>{{ 'footer.reviews.title' | translate }}</h4>

                  <button class="btn-view-all-reviews" (click)="openReviewsModal()"
                    title="Consulter tous les avis clients VERIF-ARRÊT - Enquêteur privé"
                    aria-label="Voir tous les témoignages clients investigation arrêt maladie">
                    {{ 'footer.reviews.button' | translate }}
                  </button>
                </div>
                <div class="p-4 text-center reviews-summary">
                  <div class="d-flex flex-row justify-content-between align-items-center gap-4">
                    <div class="d-flex flex-row align-items-center gap-2">
                      <div class="ig-rating-number" itemprop="ratingValue">{{ getFormattedRating() }}/5</div>
                      <meta itemprop="bestRating" content="5">
                      <meta itemprop="worstRating" content="1">
                    </div>
                    <div class="ig-stars-container">
                      <div class="d-flex gap-1">
                        <span *ngFor="let star of [0,1,2,3,4]; let i = index"
                          class="ig-star ig-star-enhanced ig-star-white" [ngStyle]="getStarStyle(i, averageRating)"
                          [attr.aria-label]="'Étoile ' + (i+1) + ' - Note enquêteur privé VERIF-ARRÊT'">★</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Description principale enrichie -->
      <div class="footer-description-section">
        <p class="footer-description text-center" itemprop="description">
          <em>
            {{ 'footer.description' | translate }}
          </em>
        </p>

      </div>

      <!-- Section Contact enrichie -->
      <div class="footer-section footer-contact" itemscope itemtype="https://schema.org/ContactPoint">
        <h4><span class="icon-contact"></span>{{ 'footer.contact.title' | translate }} VERIF-ARRÊT</h4>
        <div class="contact-info">
          <div class="contact-item">
            <a href="tel:+33607257427" class="contact-link" itemprop="telephone"
              title="Appeler VERIF-ARRÊT - Enquêteur privé agréé CNAPS - Investigation arrêt maladie"
              aria-label="Téléphoner à VERIF-ARRÊT pour une enquête privée">
              <span class="contact-icon">📞</span>
              <span class="contact-text">06 07 25 74 27</span>
            </a>
          </div>
          <div class="contact-item">
            <span class="contact-link">
              <span class="contact-icon">✉️</span>
              <span class="contact-text" itemprop="email">verifarret@gmail.com</span>
            </span>
          </div>
          <div class="contact-item" itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
            <span class="contact-link">
              <span class="contact-icon">📍</span>
              <span class="contact-text">
                <span itemprop="streetAddress">37 Rue Saint Symphorien</span>,
                <span itemprop="postalCode">79000 </span>
                <span itemprop="addressLocality">Niort</span>
              </span>
            </span>
            <meta itemprop="addressCountry" content="France">
          </div>
          <div class="contact-item">
            <span class="contact-link">
              <span class="contact-icon">🕒</span>
              <span class="contact-text" itemprop="hoursAvailable">{{ 'footer.contact.hours' | translate }}</span>
            </span>
          </div>
        </div>
        <meta itemprop="contactType" content="customer service">
        <meta itemprop="areaServed" content="France">
      </div>
    </div>
  </div>

  <!-- Footer bottom enrichi -->
  <div *ngIf="isContentVisible()">
    <div class="footer-bottom">
      <div class="footer-copyright">
        <div class="copyright-content">
          <p>&copy; {{ currentYear }} VERIF-ARRÊT. {{ 'footer.copyright' | translate }}</p>
          <p class="footer-subtitle">
            {{ 'footer.subtitle' | translate }}
          </p>
        </div>
        <div class="footer-section footer-legal">
          <div class="footer-legal">
            <button type="button" class="legal-btn" (click)="onLegalClick('mentions')"
              title="Mentions Légales VERIF-ARRÊT - Enquêteur privé agréé CNAPS investigation arrêt maladie"
              aria-label="Mentions Légales cabinet enquêteur privé VERIF-ARRÊT">
              {{ 'footer.legal.mentions' | translate }}
            </button>
            <span class="separator" aria-hidden="true">|</span>
            <button type="button" class="legal-btn" (click)="onLegalClick('confidentialite')"
              title="Politique de Confidentialité VERIF-ARRÊT - Protection données enquête privée"
              aria-label="Politique de Confidentialité enquêteur privé professionnel">
              {{ 'footer.legal.privacy' | translate }}
            </button>
            <span class="separator" aria-hidden="true">|</span>
            <button type="button" class="legal-btn" (click)="onLegalClick('cookies')"
              title="Politique de Cookies VERIF-ARRÊT - Site enquêteur privé agréé"
              aria-label="Politique de Cookies cabinet investigation privée">
              {{ 'footer.legal.cookies' | translate }}
            </button>
          </div>
        </div>
      </div>
      <div class="footer-certifications" itemscope itemtype="https://schema.org/Organization">
        <span class="certification-badge" itemscope itemtype="https://schema.org/Certification">
          <span class="badge-icon" itemprop="name"> {{ 'footer.certification.cnaps.france' | translate }}</span>
          <span class="badge-number" itemprop="identifier">NUM : AGD – 013 – 2112 – 10 – 10 – 20130336981</span>
        </span>
        <span class="certification-badge" itemscope itemtype="https://schema.org/Certification">
          <span class="badge-icon" itemprop="name">{{ 'footer.certification.cnaps.corsica' | translate }}</span>
          <span class="badge-number" itemprop="identifier">NUM : AUT – 02A – 2112 – 12 – 01 – 20130349120</span>
        </span>
      </div>
    </div>
  </div>

  <!-- Données structurées enrichies -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ProfessionalService",
    "name": "VERIF-ARRÊT",
    "description": "Cabinet d'enquêteur privé agréé CNAPS spécialisé dans la vérification d'arrêts maladie, investigation légale contre l'absentéisme abusif et surveillance professionnelle discrète",
    "serviceType": ["Enquête privée", "Investigation arrêt maladie", "Surveillance professionnelle", "Vérification absentéisme", "Détective privé", "Rapport juridique"],
    "hasCredential": [
      {
        "@type": "EducationalOccupationalCredential",
        "name": "Agrément CNAPS France",
        "identifier": "AGD – 013 – 2112 – 10 – 10 – 20130336981"
      },
      {
        "@type": "EducationalOccupationalCredential",
        "name": "Agrément CNAPS Corse",
        "identifier": "AUT – 02A – 2112 – 12 – 01 – 20130349120"
      }
    ],
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "37 Rue Saint Symphorien",
      "addressLocality": "Niort",
      "postalCode": "79000",
      "addressCountry": "France"
    },
    "contactPoint": {
      "@type": "ContactPoint",
      "telephone": "+33607257427",
      "email": "verifarret@gmail.com",
      "contactType": "customer service",
      "areaServed": "France",
      "hoursAvailable": "Mo-Sa 09:00-21:00"
    },
    "areaServed": "France",
    "slogan": "Expertise Investigation & Discrétion Professionnelle",
    "keywords": "enquêteur privé, investigation arrêt maladie, surveillance professionnelle, agrément CNAPS, détective privé, vérification absentéisme, enquête légale, rapport juridique"
  }
  </script>
</footer>

<app-modal></app-modal>